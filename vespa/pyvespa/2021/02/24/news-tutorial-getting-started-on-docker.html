<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Run search engine experiments in Vespa from python | Thiago G. Martins</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Run search engine experiments in Vespa from python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Three ways to get started with pyvespa" />
<meta property="og:description" content="Three ways to get started with pyvespa" />
<link rel="canonical" href="https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html" />
<meta property="og:url" content="https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html" />
<meta property="og:site_name" content="Thiago G. Martins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-24T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Three ways to get started with pyvespa","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html"},"url":"https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html","headline":"Run search engine experiments in Vespa from python","dateModified":"2021-02-24T00:00:00-06:00","datePublished":"2021-02-24T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://thigm85.github.io/blog/feed.xml" title="Thiago G. Martins" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-28943273-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Run search engine experiments in Vespa from python | Thiago G. Martins</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Run search engine experiments in Vespa from python" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Three ways to get started with pyvespa" />
<meta property="og:description" content="Three ways to get started with pyvespa" />
<link rel="canonical" href="https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html" />
<meta property="og:url" content="https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html" />
<meta property="og:site_name" content="Thiago G. Martins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-24T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Three ways to get started with pyvespa","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html"},"url":"https://thigm85.github.io/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html","headline":"Run search engine experiments in Vespa from python","dateModified":"2021-02-24T00:00:00-06:00","datePublished":"2021-02-24T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://thigm85.github.io/blog/feed.xml" title="Thiago G. Martins" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-28943273-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
<script type="text/javascript">
require.config({
  paths: {
    jquery: 'https://code.jquery.com/jquery-3.5.0.min',
    plotly: 'https://cdn.plot.ly/plotly-latest.min'
  },

  shim: {
    plotly: {
      deps: ['jquery'],
      exports: 'plotly'
    }
  }
});
</script>

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Thiago G. Martins</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Run search engine experiments in Vespa from python</h1><p class="page-description">Three ways to get started with pyvespa</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-02-24T00:00:00-06:00" itemprop="datePublished">
        Feb 24, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#vespa">vespa</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#pyvespa">pyvespa</a>
        
      
      </p>
    

    
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#Connect-to-a-running-Vespa-application">Connect to a running Vespa application </a></li>
<li class="toc-entry toc-h2"><a href="#Build-and-deploy-with-pyvespa-API">Build and deploy with pyvespa API </a></li>
<li class="toc-entry toc-h2"><a href="#Deploy-from-Vespa-config-files">Deploy from Vespa config files </a></li>
<li class="toc-entry toc-h2"><a href="#Final-thoughts">Final thoughts </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-02-24-news-tutorial-getting-started-on-docker.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://pyvespa.readthedocs.io/en/latest/index.html">pyvespa</a> provides a python API to Vespa. The library’s primary goal is to allow for faster prototyping and facilitate Machine Learning experiments for Vespa applications.</p>
<p>There are three ways you can get value out of <code>pyvespa</code>:</p>
<ol>
<li>
<p>You can connect to a running Vespa application.</p>
</li>
<li>
<p>You can build and deploy a Vespa application using pyvespa API.</p>
</li>
<li>
<p>You can deploy an application from Vespa config files stored on disk.</p>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We will review each of those methods.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Connect-to-a-running-Vespa-application">
<a class="anchor" href="#Connect-to-a-running-Vespa-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Connect to a running Vespa application<a class="anchor-link" href="#Connect-to-a-running-Vespa-application"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In case you already have a Vespa application running somewhere, you can directly instantiate the <a href="https://pyvespa.readthedocs.io/en/latest/reference-api.html#vespa.application.Vespa">Vespa</a> class with the appropriate endpoint. The example below connects to the <a href="https://cord19.vespa.ai/">cord19.vespa.ai</a> application:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">vespa.application</span> <span class="kn">import</span> <span class="n">Vespa</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Vespa</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="s2">"https://api.cord19.vespa.ai"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We are then good to go and ready to interact with the application through <code>pyvespa</code>, e.g., to query:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'yql'</span><span class="p">:</span> <span class="s1">'select title from sources * where userQuery();'</span><span class="p">,</span>
  <span class="s1">'hits'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s1">'summary'</span><span class="p">:</span> <span class="s1">'short'</span><span class="p">,</span>
  <span class="s1">'timeout'</span><span class="p">:</span> <span class="s1">'1.0s'</span><span class="p">,</span>
  <span class="s1">'query'</span><span class="p">:</span> <span class="s1">'coronavirus temperature sensitivity'</span><span class="p">,</span>
  <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'all'</span><span class="p">,</span>
  <span class="s1">'ranking'</span><span class="p">:</span> <span class="s1">'default'</span>
<span class="p">})</span><span class="o">.</span><span class="n">hits</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[{'id': 'index:content/1/ad8f0a6204288c0d497399a2',
  'relevance': 0.36920467353113595,
  'source': 'content',
  'fields': {'title': '&lt;hi&gt;Temperature&lt;/hi&gt; &lt;hi&gt;Sensitivity&lt;/hi&gt;: A Potential Method for the Generation of Vaccines against the Avian &lt;hi&gt;Coronavirus&lt;/hi&gt; Infectious Bronchitis Virus'}}]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Build-and-deploy-with-pyvespa-API">
<a class="anchor" href="#Build-and-deploy-with-pyvespa-API" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build and deploy with pyvespa API<a class="anchor-link" href="#Build-and-deploy-with-pyvespa-API"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also build your Vespa application from scratch using the pyvespa API. Here is a simple example:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">vespa.package</span> <span class="kn">import</span> <span class="n">ApplicationPackage</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">RankProfile</span>

<span class="n">app_package</span> <span class="o">=</span> <span class="n">ApplicationPackage</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"sampleapp"</span><span class="p">)</span>
<span class="n">app_package</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">add_fields</span><span class="p">(</span>
    <span class="n">Field</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">"title"</span><span class="p">,</span> 
        <span class="nb">type</span><span class="o">=</span><span class="s2">"string"</span><span class="p">,</span> 
        <span class="n">indexing</span><span class="o">=</span><span class="p">[</span><span class="s2">"index"</span><span class="p">,</span> <span class="s2">"summary"</span><span class="p">],</span> 
        <span class="n">index</span><span class="o">=</span><span class="s2">"enable-bm25"</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">app_package</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">add_rank_profile</span><span class="p">(</span>
    <span class="n">RankProfile</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">"bm25"</span><span class="p">,</span> 
        <span class="n">inherits</span><span class="o">=</span><span class="s2">"default"</span><span class="p">,</span> 
        <span class="n">first_phase</span><span class="o">=</span><span class="s2">"bm25(title)"</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can then deploy <code>app_package</code> to a Docker container (or directly to <a href="https://pyvespa.readthedocs.io/en/latest/create-and-deploy-vespa-cloud.html">VespaCloud</a>):</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">vespa.package</span> <span class="kn">import</span> <span class="n">VespaDocker</span>

<span class="n">vespa_docker</span> <span class="o">=</span> <span class="n">VespaDocker</span><span class="p">(</span>
    <span class="n">disk_folder</span><span class="o">=</span><span class="s2">"/Users/username/sample_app"</span><span class="p">,</span> <span class="c1"># chose your absolute folder</span>
    <span class="n">container_memory</span><span class="o">=</span><span class="s2">"8G"</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">8080</span>
<span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">vespa_docker</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">application_package</span><span class="o">=</span><span class="n">app_package</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for application status.
Waiting for application status.
Finished deployment.
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>app</code> holds an instance of the Vespa class just like our first example, and we can use it to feed and query the application just deployed. We can also go to the Vespa configuration files stored in the <code>disk_folder</code>, modify them and deploy them directly from the disk using the method discussed in the next section. This can be useful when we want to fine-tune our application based on Vespa features not available through the <code>pyvespa</code> API.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There is also the possibility to explicitly export <code>app_package</code> to Vespa configuration files (without deploying them) through the <code>export_application_package</code> method:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">vespa_docker</span><span class="o">.</span><span class="n">export_application_package</span><span class="p">(</span><span class="n">application_package</span><span class="o">=</span><span class="n">app_package</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Deploy-from-Vespa-config-files">
<a class="anchor" href="#Deploy-from-Vespa-config-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deploy from Vespa config files<a class="anchor-link" href="#Deploy-from-Vespa-config-files"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pyvespa</code> API provides a subset of the functionality available in <code>Vespa</code>. The reason is that <code>pyvespa</code> is meant to be used as an experimentation tool for Information Retrieval (IR) and not for building production-ready applications. So, the python API expands based on the needs we have to replicate common use cases that often require IR  experimentation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If your application requires functionality or fine-tuning not available in <code>pyvespa</code>, you simply build it directly through Vespa configuration files as shown in <a href="https://docs.vespa.ai/en/getting-started.html">many examples</a> on Vespa docs. But even in this case, you can still get value out of <code>pyvespa</code> by deploying it from python based on the Vespa configuration files stored on disk. To show that, we can clone and deploy the news search app covered in this <a href="https://docs.vespa.ai/en/tutorials/news-3-searching.html">Vespa tutorial</a>:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git clone https://github.com/vespa-engine/sample-apps.git
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Vespa configuration files of the news search app are stored in the <code>sample-apps/news/app-3-searching/</code> folder:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree sample-apps/news/app-3-searching/
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">sample-apps/news/app-3-searching/</span>
├── hosts.xml
├── <span class="ansi-blue-intense-fg ansi-bold">schemas</span>
│   └── news.sd
└── services.xml

1 directory, 3 files
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can then deploy to a Docker container from disk:</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">vespa.package</span> <span class="kn">import</span> <span class="n">VespaDocker</span>

<span class="n">vespa_docker_news</span> <span class="o">=</span> <span class="n">VespaDocker</span><span class="p">(</span>
    <span class="n">disk_folder</span><span class="o">=</span><span class="s2">"/Users/username/sample-apps/news/app-3-searching/"</span><span class="p">,</span> 
    <span class="n">container_memory</span><span class="o">=</span><span class="s2">"8G"</span><span class="p">,</span> 
    <span class="n">port</span><span class="o">=</span><span class="mi">8081</span>
<span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">vespa_docker_news</span><span class="o">.</span><span class="n">deploy_from_disk</span><span class="p">(</span><span class="n">application_name</span><span class="o">=</span><span class="s2">"news"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for configuration server.
Waiting for application status.
Waiting for application status.
Finished deployment.
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Again, <code>app</code> holds an instance of the Vespa class just like our first example, and we can use it to feed and query the application just deployed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Final-thoughts">
<a class="anchor" href="#Final-thoughts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Final thoughts<a class="anchor-link" href="#Final-thoughts"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We covered three different ways to connect to a <code>Vespa</code> application from python using the <code>pyvespa</code> library. Those methods provide great workflow flexibility. They allow you to quickly get started with pyvespa experimentation while enabling you to modify Vespa config files to include features not available in the pyvespa API without losing the ability to experiment with the added features.</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="thigm85/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/vespa/pyvespa/2021/02/24/news-tutorial-getting-started-on-docker.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Personal blog.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/thigm85" title="thigm85"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/Thiagogm" title="Thiagogm"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
