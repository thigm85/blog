<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>The Probabilistic Relevance Framework | Thiago G. Martins</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="The Probabilistic Relevance Framework" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Working in progress …" />
<meta property="og:description" content="Working in progress …" />
<link rel="canonical" href="https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html" />
<meta property="og:url" content="https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html" />
<meta property="og:site_name" content="Thiago G. Martins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-01T00:00:00-06:00" />
<script type="application/ld+json">
{"dateModified":"2020-12-01T00:00:00-06:00","datePublished":"2020-12-01T00:00:00-06:00","description":"Working in progress …","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html"},"url":"https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html","headline":"The Probabilistic Relevance Framework","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://thigm85.github.io/blog/feed.xml" title="Thiago G. Martins" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-28943273-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>The Probabilistic Relevance Framework | Thiago G. Martins</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="The Probabilistic Relevance Framework" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Working in progress …" />
<meta property="og:description" content="Working in progress …" />
<link rel="canonical" href="https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html" />
<meta property="og:url" content="https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html" />
<meta property="og:site_name" content="Thiago G. Martins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-01T00:00:00-06:00" />
<script type="application/ld+json">
{"dateModified":"2020-12-01T00:00:00-06:00","datePublished":"2020-12-01T00:00:00-06:00","description":"Working in progress …","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html"},"url":"https://thigm85.github.io/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html","headline":"The Probabilistic Relevance Framework","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="https://thigm85.github.io/blog/feed.xml" title="Thiago G. Martins" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-28943273-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
<script type="text/javascript">
require.config({
  paths: {
    jquery: 'https://code.jquery.com/jquery-3.5.0.min',
    plotly: 'https://cdn.plot.ly/plotly-latest.min'
  },

  shim: {
    plotly: {
      deps: ['jquery'],
      exports: 'plotly'
    }
  }
});
</script>

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">Thiago G. Martins</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">About Me</a><a class="page-link" href="/blog/search/">Search</a><a class="page-link" href="/blog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">The Probabilistic Relevance Framework</h1><p class="page-description">Working in progress ...</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-12-01T00:00:00-06:00" itemprop="datePublished">
        Dec 1, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/blog/categories/#search">search</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#term-based matching">term-based matching</a>
        &nbsp;
      
        <a class="category-tags-link" href="/blog/categories/#bm25">bm25</a>
        
      
      </p>
    

    
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#Basic-model">Basic model </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Assumptions">Assumptions </a></li>
<li class="toc-entry toc-h2"><a href="#Model">Model </a></li>
<li class="toc-entry toc-h2"><a href="#Comments">Comments </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#The-Binary-Independence-Model">The Binary Independence Model </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Assumptions">Assumptions </a></li>
<li class="toc-entry toc-h2"><a href="#Model">Model </a></li>
<li class="toc-entry toc-h2"><a href="#Absence-of-relevant-information">Absence of relevant information </a></li>
<li class="toc-entry toc-h2"><a href="#Comments">Comments </a></li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-12-01-probabilistic-relevance-framework.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Assumptions behind the Probabilistic Relevance Framework<ul>
<li>Relevance is a property of a individual document</li>
<li>Relevance is binary, a document is either relevant or not.</li>
</ul>
</li>
</ul>
<h1 id="Basic-model">
<a class="anchor" href="#Basic-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic model<a class="anchor-link" href="#Basic-model"> </a>
</h1>
<h2 id="Assumptions">
<a class="anchor" href="#Assumptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assumptions<a class="anchor-link" href="#Assumptions"> </a>
</h2>
<ol>
<li>conditional independence between documents term given relevance info<ul>
<li>debatable but shown to be robust in practice</li>
</ul>
</li>
<li>Only query terms are relevant to rank the documents<ul>
<li>Reasonable assumption in the absence of other information</li>
</ul>
</li>
</ol>
<h2 id="Model">
<a class="anchor" href="#Model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model<a class="anchor-link" href="#Model"> </a>
</h2>
<p>
$$P(rel|d, q) \approx  \sum_q U_i(tf_i)\\ \propto_q \sum_{q, tf_i&gt;0} w_i$$
</p>
<p>
$$U_i(x) = \log \frac{P(TF_i=x|rel)}{P(TF_i=x|\sim rel)}, \\ w_i = U_i(tf_i) - U_i(0) = \log \frac{P(TF_i=x|rel)P(TF_i=0|\sim rel )}{P(TF_i=x|\sim rel )P(TF_i=0|rel)}$$
</p>
<h2 id="Comments">
<a class="anchor" href="#Comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Comments<a class="anchor-link" href="#Comments"> </a>
</h2>
<ul>
<li>The advantage of using $w_i$ instead of U_i is that we only need to compute the score for documents that contain at least one query term.</li>
<li>The model is not restricted to terms and term-frequencies, any attribute of the document of query-document pair can be included.<ul>
<li>Any discrete property with a natural zero can be dealt with using the W_i form of the weight.</li>
<li>If we want to include a property without such a natural zero, we need to revert to the U_i form.</li>
</ul>
</li>
<li>The approximations above work if we are only interested in the ranking problem. They do not provide accurate probabilities due to the approximations and transformations performed to arrive at the simplified equation.</li>
</ul>
<h1 id="The-Binary-Independence-Model">
<a class="anchor" href="#The-Binary-Independence-Model" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Binary Independence Model<a class="anchor-link" href="#The-Binary-Independence-Model"> </a>
</h1>
<h2 id="Assumptions">
<a class="anchor" href="#Assumptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assumptions<a class="anchor-link" href="#Assumptions"> </a>
</h2>
<ol>
<li>TF_i is a binary variable. That is the term is either present or absent.<ul>
<li>Define t_i as the event that the term is present in the document</li>
</ul>
</li>
</ol>
<h2 id="Model">
<a class="anchor" href="#Model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model<a class="anchor-link" href="#Model"> </a>
</h2>
<ul>
<li>
<p>Under the binary assumption w_i becomes</p>
<p>$$w_i^{BIM} = \log \frac{P(t_i|rel)(1-P(t_i|\sim rel))}{(1-P(t_i|rel))P(t_i|\sim rel)}$$</p>
</li>
<li>
<p>We can estimate the probabilities below using the following quantities:</p>
<ul>
<li>N: Size of the whole collection</li>
<li>n_i: Number of documents in the collection containing t_i</li>
<li>R: Relevant set size (i.e., number of documents judged relevant)</li>
<li>
<p>r_i: Number of judged relevant docs containing t_i</p>
<p>$$P(t_i|rel)=r_i/R, \quad P(t_i|\sim rel)=(n_i - r_i)/(N-R)$$</p>
</li>
</ul>
</li>
<li>
<p>Using the estimates above and a small 0.5 correction for robustness, we have</p>
<p>$$w_i^{BIM} = \log \frac{(r_i + 0.5)(N-R-n_i+r_i+0.5)}{(n_i-r_i+0.5)(R-r_i+0.5)}$$</p>
<ul>
<li>The resulting formula is the well-known Robertson/Sprck Jones weight, also denoted as w_i^{RSJ}</li>
</ul>
</li>
</ul>
<h2 id="Absence-of-relevant-information">
<a class="anchor" href="#Absence-of-relevant-information" aria-hidden="true"><span class="octicon octicon-link"></span></a>Absence of relevant information<a class="anchor-link" href="#Absence-of-relevant-information"> </a>
</h2>
<ul>
<li>
<p>If we assume that the entire collection is non-relevant, we can use r_i = R = 0 in the formula above leading to a close approximation to the classical idf</p>
<p>$$w_i^{IDF} = \log \frac{N - n_i+0.5}{n_i+0.5}$$</p>
</li>
</ul>
<h2 id="Comments">
<a class="anchor" href="#Comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Comments<a class="anchor-link" href="#Comments"> </a>
</h2>
<ul>
<li>We assumed above that non-judged document is non-relevant</li>
<li>The absence of relevant information assumption is equivalent of saying that P(t_i|rel) = 0.5</li>
</ul>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="thigm85/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/blog/search/term-based%20matching/bm25/2020/12/01/probabilistic-relevance-framework.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/blog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Personal blog.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/thigm85" target="_blank" title="thigm85"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/Thiagogm" target="_blank" title="Thiagogm"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
